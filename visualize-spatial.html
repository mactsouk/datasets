<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>D3 World Map</title>
    <style>
      path {
        stroke: white;
        stroke-width: 0.5px;
        fill: black;
      }
	  
	  .points {
	        fill: red;
	          opacity: 0.7;
      }

    </style>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
  </head>

  <body>
    <script type="text/javascript">

		var width = 1000;
		var height = 800;

		var svg = d3.select("body")
		  .append("svg")
		  .attr("width", width)
		  .attr("height", height);

		var projection = d3.geoAlbers()
		    .scale(600)
		    .translate([width / 2, height / 2]);

		var path = d3.geoPath()
		   .projection(projection);
		   
		   var svg = d3.select("#map").append("svg")
	       	.attr("width", width)
			.attr("height", height);

		   var g = svg.append("g");
		   

		d3.json("https://raw.githubusercontent.com/mactsouk/datasets/master/data.json")
			.then(data => {
				console.log("Reading Data!");
				console.log(data);

 		   g.selectAll("path")
 	       	.data(data)
 			 .enter().append("path")
 			   .attr("d", path);

			
		     svg.append("rect").attr('width', width).attr('height', height)
		        .style('stroke', 'black').style('fill', 'none');
			
			 svg.selectAll(".points")
			   .data(data)
			   .enter().append("point", ".points")
			   .attr("transform", function(d) {
			     return "translate(" + projection([
			       d.value.longitude,
			       d.value.latitude
			     ]) + ")";
			   });

			}).catch(error => console.log(error));
	  
    </script>
  </body>

</html>
